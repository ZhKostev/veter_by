<div class="st_container image_cont">
  <div class="st_container_content">
    <%= image_tag @wind_generator.photo_url(:default) %>
  </div>
</div>

<div class="st_container charts_cont">
  <div class="st_container_content">
    <h2 class="text_center"><%= @wind_generator.title %>(<%= @wind_generator.latitude.round(2) %>
      , <%= @wind_generator.longitude.round(2) %>)</h2>

    <div class="left text_center first_chart">
      <canvas id="cvs" width="260" height="300">[No canvas support]</canvas>
      <h2>Текущая мощность</h2>
    </div>
    <div class="right text_center second_chart">
      <canvas id="cvs2" width="260" height="300">[No canvas support]</canvas>
      <h2>Текущий ветер </h2>
    </div>

  </div>
</div>

<div class="clear">

</div>

<div class="st_container characteristic_cont">
  <div class="st_container_content">
    <table>
      <thead>
      <tr>
        <th colspan="3" style="text-align: center;">Мощность, Вт/ч</th>
        <th colspan="3" style="text-align: center;">Скорость ветра, м/с</th>
      </tr>
      <tr>
        <th>Мин.</th>
        <th>Макс.</th>
        <th>Текущаяя</th>
        <th>Мин.</th>
        <th>Макс.</th>
        <th>Текущаяя</th>
      </tr>
      </thead>

      <tr>
        <td><%= @wind_generator.min_rated_power %></td>
        <td><%= @wind_generator.max_rated_power %></td>
        <td id="current_power"><%= 7 %></td>
        <td><%= @wind_generator.min_rated_wind_speed %></td>
        <td><%= @wind_generator.max_wind_speed %></td>
        <td id="current_wind"><%= 5 %></td>
      </tr>
    </table>
  </div>
</div>

<script>
    window.onload = function () {
        var cg = new RGraph.CornerGauge('cvs', <%= @wind_generator.min_rated_power %>, <%= @wind_generator.max_rated_power %>, <%= 7 %>);
        cg.Set('chart.colors.ranges',
                [
                    [<%= (@wind_generator.min_rated_power).round(1) %>, <%= (@wind_generator.min_rated_power*1.1).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.min_rated_power*1.1).round(1) %>, <%= (@wind_generator.min_rated_power*1.2).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.min_rated_power*1.2).round(1) %>, <%= (@wind_generator.max_rated_power*0.8).round(1) %>, '#0f0'],
                    [<%= (@wind_generator.max_rated_power*0.8).round(1) %>, <%= (@wind_generator.max_rated_power*0.9).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.max_rated_power*0.9).round(1) %>, <%= (@wind_generator.max_rated_power).round(1) %>, 'red']
                ]);
        cg.Set('chart.value.text.units.pre', 'Вт/ч');
        cg.Set('chart.value.text.boxed', false);
        cg.Set('chart.value.text.size', 14);
        cg.Set('chart.value.text.font', 'Verdana');
        cg.Set('chart.value.text.bold', true);
        cg.Set('chart.value.text.decimals', 2);
        cg.Set('chart.shadow.offsetx', 5);
        cg.Set('chart.shadow.offsety', 5);
        cg.Draw();

        var cg2 = new RGraph.CornerGauge('cvs2', <%= @wind_generator.min_rated_wind_speed %>, <%= @wind_generator.max_wind_speed %>, <%= @wind_generator.max_wind_speed/2 %>);
        cg2.Set('chart.colors.ranges',
                [
                    [<%= (@wind_generator.min_rated_wind_speed).round(1) %>, <%= (@wind_generator.min_rated_wind_speed*1.1).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.min_rated_wind_speed*1.1).round(1) %>, <%= (@wind_generator.min_rated_wind_speed*1.2).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.min_rated_wind_speed*1.2).round(1) %>, <%= (@wind_generator.max_wind_speed*0.8).round(1) %>, '#0f0'],
                    [<%= (@wind_generator.max_wind_speed*0.8).round(1) %>, <%= (@wind_generator.max_wind_speed*0.9).round(1) %>, 'yellow'],
                    [<%= (@wind_generator.max_wind_speed*0.9).round(1) %>, <%= (@wind_generator.max_wind_speed).round(1) %>, 'red']
                ]);
        cg2.Set('chart.value.text.units.pre', 'м/с');
        cg2.Set('chart.value.text.boxed', false);
        cg2.Set('chart.value.text.size', 14);
        cg2.Set('chart.value.text.font', 'Verdana');
        cg2.Set('chart.value.text.bold', true);
        cg2.Set('chart.value.text.decimals', 2);
        cg2.Set('chart.shadow.offsetx', 5);
        cg2.Set('chart.shadow.offsety', 5);
        cg2.Draw();
    }
</script>

<%= subscribe_to  "#{show_chanel(@wind_generator)}" %>




